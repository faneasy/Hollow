<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: index.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Generated by CoffeeScript 1.7.1

/**
 * @module models
 * @date: 2014-02-22 11:31:01
 * @author: vfasky (vfasky@gmail.com)
 * @link: http://vfasky.com
 * @version: $Id$
 *
 * 存放所有 model 定义
 * @desc
 * ## demo:
 * 
 * ```coffeescript
 * database = require './models'
 *
 * database.User.findAll().success (users) ->
 *     console.log users
 * ```
 */

(function() {
  var Sequelize, config, database, fs, lodash, path, sequelize,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i &lt; l; i++) { if (i in this &amp;&amp; this[i] === item) return i; } return -1; };

  fs = require('fs');

  path = require('path');

  config = require('../config');

  Sequelize = require('sequelize');

  lodash = require('lodash');

  database = {};


  /**
   * 实例化 Sequelize
   * @module models/sequelize
   */

  sequelize = new Sequelize(config.equelize_database, config.equelize_username, config.equelize_password, {
    dialect: config.equelize_dialect,
    host: config.equelize_host,
    port: config.equelize_port,
    maxConcurrentQueries: config.equelize_max_con,
    pool: config.equelize_pool
  });

  fs.readdirSync(__dirname).filter(function(file) {
    return file.indexOf('.coffee') === -1 &amp;&amp; file.indexOf('.') !== 0 &amp;&amp; file !== 'index.js';
  }).forEach(function(file) {
    var model;
    model = sequelize["import"](path.join(__dirname, file));
    return database[model.name] = model;
  });

  Object.keys(database).forEach(function(modelName) {
    if (__indexOf.call(database[modelName], 'associate') >= 0) {
      return database[modelName].associate(database);
    }
  });

  module.exports = lodash.extend({
    sequelize: sequelize,
    Sequelize: Sequelize
  }, database);

}).call(this);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-models.html">models</a></li><li><a href="sequelize.html">models/sequelize</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha4</a> on Sat Feb 22 2014 05:45:28 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
